# Освобождение телефона

В русскоязычном интернете преступно мало гайдов о том как очистить телефон от говна. Поэтому я написал свой, чтобы при случае ссылаться на него, а так же для использования в качестве шпаргалки.

Сразу замечу, что хардкорных действий с телефоном вроде перепрошивки и разблокировки загрузчика я тут описывать не буду. Во-первых, это довольно большие отдельные темы. Во-вторых, я хочу, чтобы этот гайд был более-менее универсальным и ему могли следовать рядовые пользователи, а перепрошивка это сложная и индивидуальная история с каждой моделью :).

Также, хоть многие действия и будут направлены на повышение приватности, тотальным параноикам (в хорошем смысле) следует обратиться к другим, более профессиональным инструкциям. Эта рассчитана на простого пользователя.

Гайд, естественно, рассчитан только на телефоны, работающие под Андроидом (пользователей айфонов прошу немедленно покинуть сайт). В конце получится полноценный телефон, из которого выпилен весь спонсорский софт, телеметрия и прочий шлак. Ускорение в несколько раз гарантировано.

## Переустановка системы

Для наибольшей эффективности настоятельно рекомендую сбросить телефон к заводскому состоянию. **Перед этим сделайте сохраните где-то вне памяти телефона все важные данные, потому что там всё сотрётся.**

После сброса к заводским вас встретит загрузочный экран, который может попросить вход в гугл/сяоми/самсунг аккаунт. Поскольку мы хотим чистый телефон, всё это нам ни к чему. К сожалению, единого способа обхода нет, так что придётся искать в сети. Пример запроса: "<модель телефона> обход блокировки" или "<модель телефона> bypass FRP".

### Если сбрасывать не вариант

Если по какой-то причине сброс к заводским не желателен, работать можно и с уже используемой системой, но эффект от этого будет меньше. Однако стоит иметь ввиду, что дорожка, по которой мы идём — очень скользкая, так что перед любыми действиями **обязательно сделайте резервную копию.** Если вы её не сделали и всё просрали — я не виноват.

## Ставим adb

Для следующих шагов понадобится [скачать Android Debug Bridge](https://developer.android.com/tools/releases/platform-tools#downloads) на компьютер. Эта программка позволит управлять системой на телефоне более полноценно (через командный интерфейс), без заложенных разработчиками оболочки ограничений. Например, на всяких встроенных приложениях кнопка удаления обычно заблокирована, но с помощью adb мы сможем легко удалить любой пакет.

Когда архив скачается, распакуйте его где-нибудь. Запускать пока ничего не надо.

## Включаем отладку по USB

Чтобы использовать adb, необходимо получить доступ к разделу настроек "Для разработчиков", но по умолчанию доступ туда закрыт. Открыть его легко, но способ зависит от оболочки. Например, в MIUI надо зайти в "О телефоне" и потыкать много раз на пункт "Версия MIUI". Способы для других телефонов можно поискать в сети по запросу "<модель телефона> настройки для разработчиков".

После получения доступа к настройкам для разработчиков перейдите туда. Обычно они находятся в расширенных настройках. Перейдя в раздел, найдите пункт "Отладка по USB". Включите её.

## Подключаемся к телефону

Возьмите USB-кабель и подключите телефон к компьютеру. На телефоне должна появиться всплывашка, где будет запрашиваться разрешение на доступ компьютера к отладке по USB. Нажмите "ОК".

Далее откройте терминал в той папке, куда вы распаковали архив с adb (где лежит файл `adb.exe`). Введите команду:

```console
adb devices
```

Это выведет список подключённых к adb устройств. Вы должны увидеть такой вывод:

```txt
List of devices attached
d0b1e531        device
```

`d0b1e531`— идентификатор моего телефона. Вы увидите вместо него идентификатор своего телефона, и он будет другой. Самое главное — надпись `device` справа от него. Это значит, что ваш телефон подключился без проблем.

### Если вывод был другой

Если вы видите это просто надпись `List of devices attached` без списка, это значит, что отладка по USB не включена.

Если вывод такой (вместо `device` написано `unauthorized`):

```txt
List of devices attached
d0b1e531        unauthorized
```

это значит, что устройство не авторизовано, то есть компьютеру не разрешена отладка по USB.

В обоих случаях попробуйте выключить и снова включить отладку по USB, а потом заново воткнуть кабель в телефон. Если ничего не случилось, попробуйте отозвать все разрешения на отладку.

### Первичная установка приложений

Далее вы будете удалять компоненты гугла, в том числе и встроенный магазин приложений. Чтобы не попасть впросак, замену ему нужно установить заранее.

Скачайте [Droidify](https://github.com/Droid-ify/client/releases) — каталог свободных приложений с открытым исходным кодом. Если с Droidify есть какие-то проблемы, поставьте [F-Droid](https://f-droid.org/F-Droid.apk). Это то же самое. Приложения в этих каталогах одни и те же, различие только во внешнем виде. Скажу так: Droidify это и есть F-Droid, только с другим интерфейсом.

Также вы удалите клавиатуру от гугла, поэтому скачайте в установленном только что магазине приложения "AnySoftKeyboard" (клавиатура) и "Russian for AnySoftKeyboard" (русский язык для неё).

## Удаление пакетов

Подключившись к телефону, введите в терминале:

```console
adb shell
```

Это запустит командную оболочку adb. Теперь вы можете приступать к удалению пакетов.

**Предупреждение: сейчас будет опасно. Если вы не хотите сделать из телефона кирпич, не отступайте от инструкций.**

С пакетом (пакет это приложение) можно обойтись по-разному. Можно полностью удалить его:

```sh
pm uninstall --user 0 имя.пакета
```

Или, если вы по какой-то причине боитесь удалять, можно отключить:

```sh
pm disable-user --user 0 имя.пакета
```

Отключённые приложения можно включить обратно прямо в настройках телефона на страницах этих приложений.

Имя пакета можно найти на странице приложения в настройках.

### Описание наиболее распространённых пакетов

Далее будут описаны пакеты, которые вы можете встретить. Если вы не нашли свой пакет в списке, то подумайте трижды о том, можно ли его удалять. Поищите в интернете. Если удалить лишнее, то телефон может потом не включиться, и придётся опять сбрасывать его и начинать весь процесс заново.

Если вы не выполняли сброс (то есть работаете на "обжитой" системе) и дошли до этого шага, не выполнив резервное копирование, то вы сам себе злобный буратино.

Если вы видите, например, галерею и думаете "её я не буду удалять, я ей пользуюсь" — всё равно смело удаляйте. Позже будет дан список альтернативных приложений, которые лучше этих пакетов. Даже если вы планируете пользоваться именно приложением из списка, то всё равно лучше его удалить и потом поставить самостоятельно. Ничего страшного не случится, а контроля будет больше.

Рекомендую открыть список приложений и идти по нему, сверяя названия пакетов со списком ниже.

#### Пакеты Гугла

Эти пакеты оказывают на телефон самое губительное действие.

- **`com.google.android.gms` — главный засранец и злодей: Google Play Servives. В него ходят остальные приложения гугла, так что если его удалить/отключить, они могут не работать. Но мы их всё равно все удалим, так что без разницы :)**
- `com.android.vending`— сам магазин приложений.
- `com.google.android.gms.location.history` — история местоположений.
- `com.google.android.apps.maps` — карты.
- `com.google.android.feedback` — бесполезная штука для каких-то отзывов.
- `com.google.android.ims` — приложение для звонков. Лучше просто отключить, мало ли что на него завязано.
- `com.google.android.contacts` — приложение для контактов. Тоже лучше просто отключить.
- `com.android.chrome` — браузер.
- `com.google.android.googlequicksearchbox` — панель поиска.
- `com.google.android.tts` — речевой синтезатор (говорилка типа "окей гугл").
- `com.google.android.apps.wellbeing` — я сам не очень понял что это, но оно точно не важное.
- `com.google.android.youtube` — собственно, ютуб.
- `com.google.android.apps.youtube.music` — ютуб-музыка.
- `com.google.ar.lens` — камера с сервисами гугла.
- `com.google.android.apps.tachyon` — видеочат.
- `com.android.hotwordenrollment.okgoogle` — голосовой ассистент.
- `com.android.hotwordenrollment.xgoogle` — тоже голосовой ассистент.
- `com.google.android.apps.safetyhub` — "безопасность".
- `com.google.android.inputmethod.latin` — клавиатура. Не удаляйте, если не ещё установили заменитель.

Были случаи, когда после удаления приложения для СМС от гугла сообщения переставали переходить, так что сначала отключите его и проверьте.

#### Пакеты от Сяоми

Вот тут аккуратно. В принципе, сервисы Сяоми срут и жрут меньше Гугла, но лично я предпочитаю их сносить. Кому-то, однако, могут показаться полезными.

- `com.xiaomi.mipicks` — магазин приложений.
- `com.miui.player` — музыка.
- `com.miui.bugreport` — бесполезная фича для репорта багов.
- `com.miui.miservice` — то же самое: "обратная связь".
- `com.miui.weather2` — погода
- `com.xiaomi.scanner` — сканер
- `com.miui.yellowpage` — так и не понял что это, но оно вообще ни на что не влияет.
- `com.miui.calculator` — калькулятор.
- `com.xiaomi.calendar` — календарь
- **`com.miui.analytics` — сервис, собирающий данные о пользователе**
- **`com.miui.msa.global` — засранец, который показывает рекламу прямо в системе**
- `com.xiaomi.glgm` — магазин игр.
- `com.xiaomi.payment` — платежи.
- `com.mipay.wallet.in` — кошелёк.
- `com.micredit.in` — займы. Без шуток.
- `com.mi.global.shop` — магазин продукции Сяоми.
- `com.xiaomi.midrop` — делиться файлами.
- `com.miui.fm` — радио
- `com.mi.global.bbs` — что-то типа форума.
- `com.mi.globalbrowser` — браузер.
- `com.miui.videoplayer` — это не системный проигрыватель видео, а сервис типа ютуба.
- `com.mi.android.globalFileexplorer` — проводник от Сяоми.
- `com.miui.gallery` — галерея. Её лучше просто выключить, потому что, вроде, что-то на неё завязано.

Далее идут сервисы, относящиеся к аккаунту Сяоми. Если вы зачем-то таковой завели, то лучше их не трогать. Если вы никаких аккаунтов не создавали и не планируете, и облаком пользоваться не будете, то можете удалять. Пути назад не будет :).

```txt
com.miui.cloudservice
com.miui.cloudservice.sysbase
com.miui.cloudsync
com.miui.micloudsync
com.miui.cloudbackup
com.miui.newmidrive
com.xiaomi.mi_connect_service
```

#### Партнёрские пакеты

Всё это можно сносить без раздумий, так как эти приложения являются прямой рекламой, предустановленной на ваш телефон его производителями за деньги. Для удобства пишу сразу с командами:

```sh
pm uninstall --user 0 com.facebook.system
pm uninstall --user 0 com.facebook.services
pm uninstall --user 0 com.facebook.katana
pm uninstall --user 0 com.facebook.appmanager
pm uninstall --user 0 com.opera.preinstall
pm uninstall --user 0 com.mediatek.ygps
pm uninstall --user 0 com.booking

# дополнить список...
```

#### Опасно!

Пакеты из списка ниже очень похожи на какое-то фуфло и так и просятся под нож, но на деле они критически важны для системы. О большинство я уже сам споткнулся, так что делюсь горьким опытом.

- Не удалять `com.google.android.documentsui` — он отвечает за права доступа, без него всё сломается.
- Не удалять `com.android.location.fused` — без него система тупо не запустится.
- Не удалять `com.miui.global.packageinstaller` — это не магазин приложений, как может показаться, а системный установщик пакетов. Без него вы ничего не поставите, если вообще запуститесь.
- Не удалять `com.xiaomi.finddevice` — я не пробовал, но говорят, что удалять нельзя.
- Не удалять `com.miui.securitycenter` — тоже не пробовал, и тоже говорят, что удалять нельзя.

#### Дополнительные сведения

Я постарался сделать описание всех пакетов, которые встречал сам. Однако я, конечно, встречал не все, так что при отсутствии пакета в моём списке можно обратиться к следующим ресурсам:

- [technastic.com/xiaomi-bloatware-list-miui](https://technastic.com/xiaomi-bloatware-list-miui/)
- [selivan.github.io/2020/02/25/removing-bloatware-from-xiaomi-miui-android.html](https://selivan.github.io/2020/02/25/removing-bloatware-from-xiaomi-miui-android.html)
- [4pda.to/forum/index.php?showtopic=921645#entry77962469](https://4pda.to/forum/index.php?showtopic=921645#entry77962469)
- Или просто поискать по запросу "android bloatware list".

### Последние удаления

После того, как вы разобрались со всеми пакетами из списка, зайдите в меню приложений. Если вы видите там знакомые вам приложения, которых не было в списке (например, яндекс-браузер), можете удалить их тем же образом. Не щадите никого.

## Установка ключевых приложений

### Открытый софт

После того, как вы оставили после себя выжженную пустошь, время её озеленить нормальными приложениями, которые не будут много просить есть и работать максимально локально, не собирая маркетинговую телеметрию. У всего, что я порекомендую дальше, хорошая репутация и открытый исходный код.

Базовые приложения [Simple Mobile Tools](https://github.com/SimpleMobileTools) (есть на F-Droid):
- Simple Contacts — контакты
- Simple Calendar — календарь
- Simple Voice Recorder — диктофон
- Simple Flashlight — фонарик
- Simple SMS Messenger — СМС
- Simple Draw — примитивная рисовалка
- Simple Notes — записки
- Simple Thank You — приложение для настройки внешнего вида для всех приложений выше разом.

Звонилка: [Koler](https://github.com/Chooloo/koler), есть на F-Droid. Выглядит стильно. Правда, на некоторых системах он почему-то может не работать. В таком случае можно поставить Simple Dialer.

Браузер: Fennec, есть на F-Droid. Это форк файрфокса, но как и сам файрфокс, *полностью* открытым он, к сожалению, не является. Лучше, однако, чем хром или — упаси боже — яндекс браузер.

Сканер: [Binary Eye](https://github.com/markusfisch/BinaryEye), есть на F-Droid. Шустрый, простой и фичастый сканер.

Погода: приложений, в принципе, куча на любой вкус. Я пользуюсь [Geometric Weather](https://github.com/WangDaYeeeeee/GeometricWeather), он есть на F-Droid.

Файловый менеджер: [Material Files](https://github.com/zhanghai/MaterialFiles), есть на F-Droid. Красивый интерфейс, есть все обычные фичи файловых менеджеров и возможность поднять FTP-сервер.

Музыкальный плеер: [AIMP](https://www.aimp.ru?do=download). На F-Droid его нет, но исходный код [открыт](https://github.com/ArtemIzmaylov/ACL/tree/dev-fpc). Лучше плеера под андроид я пока что не видел. Там ещё и скины есть.

Остальные приложения можно легко найти в том же F-Droid. Например, альтернативный клиент Телеграма с вырезанными несвободными компонентами. Искать надо на английском.

### Проприетарщина

К сожалению, не всему софту существует достойная свободная замена. И всякие банки-госуслуги ставить всё равно придётся. Поскольку гугл плей вы стёрли (надеюсь), а apk своих приложений никто никогда почему-то не выкладывает на свой сайт, встаёт вопрос: откуда их качать?

А вот есть такое приложение как [Aurora Store](https://github.com/sorydima/Aurora). Оно подключается к гугл плею и качает оттуда, но при этом не посылает туда никаких ваших данных и не занимается шпионажем всё остальное время в фоне. В остальном функциональность такая же и даже лучше, потому что он, например, не вредничает из-за "нехватки" места.

Также бонус для параноиков: прекрасное приложение [Tracker Control](https://github.com/TrackerControl/tracker-control-android) (есть на F-Droid). Реализует функционал файрволла, но индивидуально по приложениям. Можно открыть каждое и посмотреть куда идут запросы, заблочить определённые адреса или вообще доступ в сеть. Незначительные минусы в том, что при работе занимает слот ВПН и немного подъедает батарейку, хотя по сравнению с тем, что было до чистки, это ничто. Вот, например, трекеры, куда 2GIS отсылает информацию:

![AltBeacon, Amplitude, AppsFlyer, Facebook Analytics, Facebook Share, Google AdMob, Google CrashLytics, Google Firebase Analytics, Google Play Install Referrer, Huawei Mobile Services, VKontakte](/public/post-img/2gis-trackers.png)

То есть полный треш, отправляют информацию вообще всем большим ребятам. Даже стандартное приложение телефона от гугла ходит в интернет по *пяти* адресам. Вот так и пользуйся телефоном...

## Заключение

В результате:

- Мы заменили большую часть жирного проприетарного софта на свежий и лёгкий опенсорс.
- Телефон стал работать гораздо быстрее, батарейка стала держаться дольше и всё такое.
- Оторвали рекламные корпорации от их главной кормушки — данных пользователей.
- Немножко потешили свою паранойю (хотя это ещё далеко не предел и вообще только начало).
- Получили больше контроля над системой.

Теперь главное — не засрать телефон. Перед установкой приложения всегда старайтесь искать ему открытую альтернативу.

## Послесловие

Если вы следовали инструкции, но что-то пошло не так, если описание какого-то пакета не соответствует действительности, если у вас есть вопросы или вы хотите что-то добавить, то пишите мне. Можно на почту: mail@dimius.ru.

